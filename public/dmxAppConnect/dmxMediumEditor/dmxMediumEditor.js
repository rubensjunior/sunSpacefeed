/*!
 App Connect Medium Editor
 Version: 2.0.2
 (c) 2024 Wappler.io
 @build 2024-05-16 18:18:47
 */
MediumEditor||alert("Please insert medium-editor.js before dmxMediumEditor.js on your page."),dmx.mediumEditor={},dmx.mediumEditor.extensions={},dmx.mediumEditor.Extension=function(t,e){e.name=t,dmx.mediumEditor.extensions[t]=MediumEditor.Extension.extend(e)},dmx.mediumEditor.Button=function(t,e){e.name=t,dmx.mediumEditor.extensions[t]=MediumEditor.extensions.button.extend(e)},dmx.mediumEditor.insertButton=MediumEditor.Extension.extend({aria:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,insertHTML:void 0,init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getInsertButton:function(){return this.button},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},createButton:function(){var t=this.document.createElement("button"),e=this.contentDefault,i=this.getAria();return t.classList.add("medium-editor-insertbar-action"),t.classList.add("medium-editor-insertbar-action-"+this.name),this.classList&&this.classList.forEach((function(e){t.classList.add(e)})),i&&(t.setAttribute("title",i),t.setAttribute("aria-label",i)),this.attrs&&Object.keys(this.attrs).forEach((function(e){t.setAttribute(e,this.attrs[e])}),this),"fontawesome"===this.getEditorOption("buttonLabels")&&this.contentFA&&(e=this.contentFA),t.innerHTML=e,t},handleClick:function(t){if(t.preventDefault(),t.stopPropagation(),this.insertHTML){var e=this.base.getFocusedElement().querySelector(".medium-editor-is-selected");"function"==typeof this.insertHTML?this.insertHTML(e):e.insertAdjacentHTML("beforebegin",this.insertHTML)}this.setSelection()},setSelection:function(){this.base.trigger("editableInput",{},this.base.getFocusedElement()),MediumEditor.selection.moveCursor(this.document,this.base.getFocusedElement().querySelector(".medium-editor-is-selected"),0),this.base.getFocusedElement().focus(),this.base.getExtensionByName("toolbar").checkState()}}),dmx.mediumEditor.InsertButton=function(t,e){e.name=t,dmx.mediumEditor.extensions[t]=dmx.mediumEditor.insertButton.extend(e)},dmx.Component("medium-editor",{initialData:{value:""},attributes:{editable:{type:Boolean,default:!1},placeholder:{type:String,default:"Type your text"},static:{type:Boolean,default:!1},align:{type:String,default:"center",enum:["left","center","right"]},buttons:{type:[String,Array],default:["bold","italic","underline","anchor","h2","h3","quote"]},disableReturn:{type:Boolean,default:!1},disableDoubleReturn:{type:Boolean,default:!1},disableExtraSpaces:{type:Boolean,default:!1},disableSpellcheck:{type:Boolean,default:!1},targetBlank:{type:Boolean,default:!1},autoLink:{type:Boolean,default:!1},autoList:{type:Boolean,default:!1},fontawesome:{type:Boolean,default:!1},value:{type:String,default:null}},methods:{setValue(t){this._setValue(t)}},events:{changed:Event,updated:Event},render(){let t=this._getValueFromDOM();t.includes("{{")&&this.$watch(t,this._setValue.bind(this)),this.props.value&&this._setValue(this.props.value),this._initEditor()},performUpdate(t){t.has("value")&&this._setValue(this.props.value),this._destroyEditor(),("TEXTAREA"==this.$node.tagName||this.props.editable)&&this._initEditor()},destroy(){this._destroyEditor()},_setValue(t){this._editor?this._editor.setContent(t):"TEXTAREA"==this.$node.tagName?this.$node.value=t:this.$node.innerHTML=t,this._updateHander()},_initEditor(){if(this._editor)return;let t=this.props.buttons;"string"==typeof t&&(t="["==t[0]?dmx.parse(t):t.split(/\s*,\s*/g)),this._editor=new MediumEditor(this.$node,{elementsContainer:this.$node.closest(".modal, .offcanvas, .offcanvas-sm, .offcanvas-md, .offcanvas-lg, .offcanvas-xl, .offcanvas-xxl")||document.body,buttonLabels:!!this.props.fontawesome&&"fontawesome",disableReturn:this.props.disableReturn,disableDoubleReturn:this.props.disableDoubleReturn,disableExtraSpaces:this.props.disableExtraSpaces,spellcheck:!this.props.disableSpellcheck,targetBlank:this.props.targetBlank,autoLink:this.props.autoLink,toolbar:{static:this.props.static,sticky:this.props.static,align:this.props.align,updateOnEmptySelection:this.props.static,buttons:t},anchorPreview:{showWhenToolbarIsVisible:this.props.static},placeholder:{text:this.props.placeholder,hideOnClick:!1},extensions:this._initExtensions()}),this._editor.dmxComponent=this,this._editor.subscribe("editableInput",this._updateHander.bind(this))},_destroyEditor(){this._editor&&(this._editor.destroy(),delete this._editor)},_initExtensions(){let t={imageDragging:{}};Object.keys(dmx.mediumEditor.extensions).forEach((e=>{let i=dmx.mediumEditor.extensions[e],s={};if(("auto-list"!=e||this.props.autoList)&&"toolbar"!=e){if(this.$node.hasAttribute("medium:"+e))try{s=dmx.parse(this.$node.getAttribute("medium:"+e))}catch(t){console.warn("Invalid config for "+e)}else if("image-upload"==e)return;t[e]=new i(s)}}));let e=this.props.buttons;return"string"==typeof e&&(e="["==e[0]?dmx.parse(e):e.split(/\s*,\s*/g)),t.toolbar=new dmx.mediumEditor.extensions.toolbar({static:this.props.static,sticky:this.props.static,align:this.props.align,updateOnEmptySelection:this.props.static,buttons:e}),t},_getValueFromDOM(){let t="TEXTAREA"==this.$node.tagName?this.$node.value:this.$node.innerHTML;return t&&(t=t.trim()),t},_updateHander(t){this._editor?this.set("value",this._editor.getContent()):this.set("value",this._getValueFromDOM()),dmx.nextTick((()=>{this.dispatchEvent("updated"),t instanceof Event&&this.dispatchEvent("changed")}))}}),dmx.mediumEditor.Extension("alert",{init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments),this.getEditorOption("elementsContainer").appendChild(this.getAlertElement())},createAlertElement:function(){var t=this.document.createElement("div");return t.id="medium-editor-alert-"+this.getEditorId(),t.className="medium-editor-alert-overlay",t.innerHTML='<div class="medium-editor-toolbar medium-editor-toolbar-active medium-editor-alert"><ul><li><button class="medium-editor-button-first medium-editor-button-last"></button></li></ul></div>',this.on(t,"click",this.hide.bind(this)),t},getAlertElement:function(){return this.elm||(this.elm=this.createAlertElement()),this.elm},show:function(t){var e=this.getAlertElement();e.querySelector("button").innerHTML=t,e.classList.add("medium-editor-alert-active")},hide:function(){this.getAlertElement().classList.remove("medium-editor-alert-active")}}),MediumEditor.util.keyCode.LEFT=37,MediumEditor.util.keyCode.UP=38,MediumEditor.util.keyCode.RIGHT=39,MediumEditor.util.keyCode.DOWN=40,dmx.mediumEditor.Extension("handle-selection",{init:function(){this.subscribe("focus",this.checkSelection.bind(this)),this.subscribe("editableClick",this.delay(this.checkSelection.bind(this))),this.subscribe("editableKeydown",this.handleEditableKeydown.bind(this)),this.subscribe("editableKeyup",this.checkSelection.bind(this)),this.on(this.document.documentElement,"mouseup",this.checkSelection.bind(this))},handleEditableKeydown:function(t){var e=MediumEditor.selection.getSelectionStart(this.document),i=MediumEditor.selection.getCaretOffsets(e),s=MediumEditor.util.getKeyCode(t);if(s==MediumEditor.util.keyCode.BACKSPACE&&0===i.left&&e.previousElementSibling&&"FIGURE"==e.previousElementSibling.tagName)e.previousElementSibling.querySelector("img").click(),/^(\s+|<br\/?>)?$/i.test(e.innerHTML)&&e.parentNode.removeChild(e),t.preventDefault();else if(s==MediumEditor.util.keyCode.BACKSPACE&&"IMG"==e.tagName){var o=MediumEditor.util.getClosestTag(e,"figure");MediumEditor.selection.moveCursor(this.document,o.nextElementSibling,0),o.parentNode.removeChild(o),t.preventDefault()}else if(s==MediumEditor.util.keyCode.ENTER&&!1!==MediumEditor.util.getClosestTag(e,"figure")){var n=this.document.createElement("p");n.innerHTML="<br>",(o=MediumEditor.util.getClosestTag(e,"figure")).parentNode.parentNode.insertBefore(n,o.parentNode.nextSibling),MediumEditor.selection.moveCursor(this.document,n),t.preventDefault()}else"IMG"!=e.tagName||s!=MediumEditor.util.keyCode.UP&&s!=MediumEditor.util.keyCode.DOWN&&s!=MediumEditor.util.keyCode.LEFT&&s!=MediumEditor.util.keyCode.RIGHT||MediumEditor.selection.moveCursor(this.document,e.parentNode.querySelector("figcaption"))},setContent:function(t){return/^\s*$/.test(t)?"<p><br></p>":t},getContent:function(t){return t.replace(/medium\-editor\-is\-selected/gi,"").replace(/class="\s*"/gi,"")},delay:function(t){return function(){setTimeout(function(){t.call(this,arguments)}.bind(this),0)}},destroy:function(){this.getEditorElements().forEach((function(t){Array.prototype.slice.call(t.querySelectorAll(".medium-editor-is-selected")).forEach((function(t){t.classList.remove("medium-editor-is-selected")}))}),this)},checkSelection:function(){var t=this.document.getSelection();if(t&&t.rangeCount>0){var e=t.getRangeAt(0),i=MediumEditor.util.getContainerEditorElement(e.commonAncestorContainer);if(i){var s=MediumEditor.util.getTopBlockContainer(e.commonAncestorContainer);Array.prototype.slice.call(i.querySelectorAll(".medium-editor-is-selected")).forEach((function(t){t.classList.remove("medium-editor-is-selected")})),MediumEditor.util.isMediumEditorElement(s)||s.classList.add("medium-editor-is-selected");var o=MediumEditor.selection.getSelectionStart(this.document);o&&"IMG"==o.tagName&&o.classList.add("medium-editor-is-selected")}}}}),dmx.mediumEditor.Extension("toolbar",{align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],insertDiffLeft:-45,diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement()),this.getEditorOption("elementsContainer").appendChild(this.getInsertbarElement())},forEachExtension:function(t,e){return this.base.extensions.forEach((function(i){if(i!==this)return t.apply(e||this,arguments)}),this)},createToolbar:function(){var t=this.document.createElement("div");return t.id="medium-editor-toolbar-"+this.getEditorId(),t.className="medium-editor-toolbar",this.static?t.className+=" static-toolbar":this.relativeContainer?t.className+=" medium-editor-relative-toolbar":t.className+=" medium-editor-stalker-toolbar",t.appendChild(this.createToolbarButtons()),this.forEachExtension((function(e){e.hasForm&&t.appendChild(e.getForm())})),this.attachEventHandlers(),t},createToolbarButtons:function(){var t,e,i,s,o,n,r=this.document.createElement("ul");return r.id="medium-editor-toolbar-actions"+this.getEditorId(),r.className="medium-editor-toolbar-actions",r.style.display="block",this.buttons.forEach((function(i){"string"==typeof i?(o=i,n=null):(o=i.name,n=i),(s=this.base.addBuiltInExtension(o,n))&&"function"==typeof s.getButton&&(e=s.getButton(this.base),t=this.document.createElement("li"),MediumEditor.util.isElement(e)?t.appendChild(e):t.innerHTML=e,r.appendChild(t))}),this),(i=r.querySelectorAll("button")).length>0&&(i[0].classList.add(this.firstButtonClass),i[i.length-1].classList.add(this.lastButtonClass)),r},createInsertbar:function(){var t=this.document.createElement("div");t.id="medium-editor-insertbar-"+this.getEditorId(),t.className="medium-editor-insertbar";var e=this.document.createElement("button");return e.className="medium-editor-insertbar-toggle",e.innerHTML="fontawesome"==this.getEditorOption("buttonLabels")?'<i class="fa fa-plus"></i>':"<b>+</b>",this.on(e,"click",this.handleToggleClick.bind(this)),t.appendChild(e),t.appendChild(this.createInsertbarButtons()),t},createInsertbarButtons:function(){var t,e,i,s,o=this.document.createElement("ul");return o.id="medium-editor-insertbar-actions"+this.getEditorId(),o.className="medium-editor-insertbar-actions",Object.keys(dmx.mediumEditor.extensions).forEach((function(n){s=n,null,(i=this.base.addBuiltInExtension(s,null))&&"function"==typeof i.getInsertButton&&(e=i.getInsertButton(this.base),t=this.document.createElement("li"),MediumEditor.util.isElement(e)?t.appendChild(e):t.innerHTML=e,o.appendChild(t))}),this),o},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar),this.insertbar&&(this.insertbar.parentNode&&this.insertbar.parentNode.removeChild(this.insertbar),delete this.insertbar)},getInteractionElements:function(){return[this.getToolbarElement(),this.getInsertbarElement()]},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},getInsertbarElement:function(){return this.insertbar||(this.insertbar=this.createInsertbar()),this.insertbar},getInsertbarActionsElement:function(){return this.getInsertbarElement().querySelector(".medium-editor-insertbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=MediumEditor.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(t){if(t&&t.target&&(MediumEditor.util.isDescendant(this.getToolbarElement(),t.target)||MediumEditor.util.isDescendant(this.getInsertbarElement(),t.target)))return!1;this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar(),this.hideInsertbar()}.bind(this),1)},handleFocus:function(){this.checkState()},handleToggleClick:function(t){t.preventDefault(),t.stopPropagation(),this.isInsertbarExpanded()?this.collapseInsertbar():this.expandInsertbar()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isInsertbarDisplayed:function(){return this.getInsertbarElement().classList.contains("medium-editor-insertbar-active")},showInsertbar:function(){!this.isInsertbarDisplayed()&&this.getInsertbarElement().querySelector(".medium-editor-insertbar-actions").childNodes.length&&(this.getInsertbarElement().classList.add("medium-editor-insertbar-active"),this.trigger("showInsertbar",{},this.base.getFocusedElement()))},hideInsertbar:function(){this.isInsertbarDisplayed()&&(this.collapseInsertbar(),this.getInsertbarElement().classList.remove("medium-editor-insertbar-active"),this.trigger("hideInsertbar",{},this.base.getFocusedElement()))},isInsertbarExpanded:function(){return this.getInsertbarElement().classList.contains("medium-editor-insertbar-expand")},expandInsertbar:function(){this.isInsertbarExpanded()||(this.getInsertbarElement().classList.add("medium-editor-insertbar-expand"),this.trigger("expandInsertbar"))},collapseInsertbar:function(){this.isInsertbarExpanded()&&(this.getInsertbarElement().classList.remove("medium-editor-insertbar-expand"),this.trigger("collapseInsertbar"))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension((function(t){t.hasForm&&t.isDisplayed()&&t.hideForm()}))},multipleBlockElementsSelected:function(){var t=new RegExp("<("+MediumEditor.util.blockContainerElementNames.join("|")+")[^>]*>","g"),e=MediumEditor.selection.getSelectionHtml(this.document).replace(/<[^\/>][^>]*><\/[^>]+>/gim,"").match(t);return!!e&&e.length>1},modifySelection:function(){var t=this.window.getSelection().getRangeAt(0);if(this.standardizeSelectionStart&&t.startContainer.nodeValue&&t.startOffset===t.startContainer.nodeValue.length){var e=MediumEditor.util.findAdjacentTextNodeWithContent(MediumEditor.selection.getSelectionElement(this.window),t.startContainer,this.document);if(e){for(var i=0;0===e.nodeValue.substr(i,1).trim().length;)i+=1;t=MediumEditor.selection.select(this.document,e,i,t.endContainer,t.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||MediumEditor.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar()&&this.hideInsertbar();var t=MediumEditor.selection.getSelectionElement(this.window);return!t||-1===this.getEditorElements().indexOf(t)||t.getAttribute("data-disable-toolbar")?this.hideToolbar()&&this.hideInsertbar():(this.document.getSelection().isCollapsed&&/^(\s+|<br\/?>)?$/i.test(MediumEditor.util.getTopBlockContainer(MediumEditor.selection.getSelectionStart(this.document)).innerHTML)?this.showAndUpdateInsertbar():this.hideInsertbar(),this.updateOnEmptySelection&&this.static?this.showAndUpdateToolbar():!MediumEditor.selection.selectionContainsContent(this.document)||!1===this.allowMultiParagraphSelection&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar())}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},showAndUpdateInsertbar:function(){this.collapseInsertbar(),this.trigger("positionInsertbar",{},this.base.getFocusedElement()),this.setInsertbarPosition()},setToolbarButtonStates:function(){this.forEachExtension((function(t){"function"==typeof t.isActive&&"function"==typeof t.setInactive&&t.setInactive()})),this.checkActiveButtons()},checkActiveButtons:function(){var t,e=[],i=null,s=MediumEditor.selection.getSelectionRange(this.document),o=function(e){"function"==typeof e.checkState?e.checkState(t):"function"==typeof e.isActive&&"function"==typeof e.isAlreadyApplied&&"function"==typeof e.setActive&&!e.isActive()&&e.isAlreadyApplied(t)&&e.setActive()};if(s&&(this.forEachExtension((function(t){"function"!=typeof t.queryCommandState||null===(i=t.queryCommandState())?e.push(t):i&&"function"==typeof t.setActive&&t.setActive()})),t=MediumEditor.selection.getSelectedParentElement(s),this.getEditorElements().some((function(e){return MediumEditor.util.isDescendant(e,t,!0)}))))for(;t&&(e.forEach(o),!MediumEditor.util.isMediumEditorElement(t));)t=t.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var t=this.base.getFocusedElement(),e=this.window.getSelection();if(!t)return this;!this.static&&e.isCollapsed||(this.relativeContainer||(this.static?this.positionStaticToolbar(t):this.positionToolbar(e)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()),this.showToolbar())},setInsertbarPosition:function(){var t=this.base.getFocusedElement(),e=this.window.getSelection();if(!t)return this;var i=MediumEditor.util.getTopBlockContainer(this.base.getSelectedParentElement());if(e.isCollapsed&&""==i.textContent){var s=i.getBoundingClientRect();this.getInsertbarElement().style.top=s.top+this.window.pageYOffset+"px",this.getInsertbarElement().style.left=Math.max(s.left+this.window.pageXOffset+this.insertDiffLeft,0)+"px",this.trigger("positionedInsertbar",{},this.base.getFocusedElement()),this.showInsertbar()}else this.hideInsertbar()},positionStaticToolbar:function(t){this.getToolbarElement().style.left="0";var e,i=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,s=this.window.innerWidth,o=this.getToolbarElement(),n=t.getBoundingClientRect(),r=n.top+i,a=n.left+n.width/2,d=o.offsetHeight,l=o.offsetWidth,u=l/2;switch(this.sticky?i>r+t.offsetHeight-d-this.stickyTopOffset?(o.style.top=r+t.offsetHeight-d+"px",o.classList.remove("medium-editor-sticky-toolbar")):i>r-d-this.stickyTopOffset?(o.classList.add("medium-editor-sticky-toolbar"),o.style.top=this.stickyTopOffset+"px"):(o.classList.remove("medium-editor-sticky-toolbar"),o.style.top=r-d+"px"):o.style.top=r-d+"px",this.align){case"left":e=n.left;break;case"right":e=n.right-l;break;case"center":e=a-u}e<0?e=0:e+l>s&&(e=s-Math.ceil(l)-1),o.style.left=e+"px"},positionToolbar:function(t){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var e=t.getRangeAt(0),i=e.getBoundingClientRect();(!i||0===i.height&&0===i.width&&e.startContainer===e.endContainer)&&(i=1===e.startContainer.nodeType&&e.startContainer.querySelector("img")?e.startContainer.querySelector("img").getBoundingClientRect():e.startContainer.getBoundingClientRect());var s,o,n=this.window.innerWidth,r=this.getToolbarElement(),a=r.offsetHeight,d=r.offsetWidth/2,l=this.diffLeft-d,u=this.getEditorOption("elementsContainer"),h=["absolute","fixed"].indexOf(window.getComputedStyle(u).getPropertyValue("position"))>-1,c={},m={};h?(o=u.getBoundingClientRect(),["top","left"].forEach((function(t){m[t]=i[t]-o[t]})),m.width=i.width,m.height=i.height,i=m,n=o.width,c.top=u.scrollTop):c.top=this.window.pageYOffset,s=i.left+i.width/2,c.top+=i.top-a,i.top<50?(r.classList.add("medium-toolbar-arrow-over"),r.classList.remove("medium-toolbar-arrow-under"),c.top+=50+i.height-this.diffTop):(r.classList.add("medium-toolbar-arrow-under"),r.classList.remove("medium-toolbar-arrow-over"),c.top+=this.diffTop),s<d?(c.left=l+d,c.right="initial"):n-s<d?(c.left="auto",c.right=0):(c.left=l+s,c.right="initial"),["top","left","right"].forEach((function(t){r.style[t]=c[t]+(isNaN(c[t])?"":"px")}))}}),dmx.mediumEditor.states={headers:{buttons:["h1","h2","h3","h4","h5","h6"],checkState:function(t){return-1!=["H1","H2","H3","H4","H5","H6"].indexOf(t.nodeName)}}},dmx.mediumEditor.Extension("toolbar-states",{pendingState:null,currentState:null,init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments),this.subscribe("positionToolbar",this.onPositionToolbar.bind(this))},checkState:function(t){this.pendingState||Object.keys(dmx.mediumEditor.states).forEach((function(e){var i=dmx.mediumEditor.states[e];i.checkState(t)&&(this.pendingState=i)}),this),MediumEditor.util.isMediumEditorElement(t)&&(this.currentState=this.pendingState,this.pendingState=null)},onPositionToolbar:function(){var t,e,i=this.base.getExtensionByName("toolbar"),s=this.currentState||{buttons:i.buttons};i.forEachExtension((function(o){if("function"==typeof o.getButton){var n=o.getButton();-1!=s.buttons.indexOf(o.name)?(n.style.removeProperty("display"),t=t||n,e=n):n.style.setProperty("display","none"),n.classList.remove(i.firstButtonClass),n.classList.remove(i.lastButtonClass)}})),t&&e&&(t.classList.add(i.firstButtonClass),e.classList.add(i.lastButtonClass))}}),dmx.mediumEditor.Extension("auto-list",{init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeypress",this.onKeypress.bind(this))},onKeypress:function(t){if(MediumEditor.util.isKey(t,[MediumEditor.util.keyCode.SPACE])){var e=this.base.getSelectedParentElement().textContent;"1."!=e&&"*"!=e||(this.base.execAction("*"==e?"insertunorderedlist":"insertorderedlist"),this.base.getSelectedParentElement().textContent="",t.preventDefault())}}});
//# sourceMappingURL=dmxMediumEditor.js.map
